<!DOCTYPE html>
<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div class="header">
      Loan Quote Calculator
    </div>

    <div class="card content">
      <div class="card-header">
        Loan details
      </div>
      <div class="row card-body">
		<div class="col-md-6">
			<label for="requestedAmount">Loan amount</label>
			<div>
			  <input
				type="text"
				id="requestedAmount"
				placeholder="Enter loan amount"
			  />
			</div>
	
			<button
			  id="demo"
			  onclick="myFunction()"
			  type="submit"
			  class="btn btn-primary"
			  style="margin-top: 20px;"
			>
			  Submit
			</button>
		</div>
		<div class="col-md-6">
			<div>
				<label for="rate">Rate:</label>
				<span id="rate">test</span>
			</div>
			<div>
				<label for="monthlyPayment">Monthly payment:</label>
				<span id="monthlyPayment">test</span>
			</div>
			<div>
				<label for="totalPayment">Total payment:</label>
				<span id="totalPayment">test</span>
			</div>
		</div>
      </div>
    </div>

    <script>
      function myFunction() {
		var amount = document.getElementById("requestedAmount").value;
		var url = "http://localhost:8080/loans/calculate?amount=" + amount;
        fetch(url)
          .then(function (response) {
            return response.json();
          })
          .then(function (data) {
			console.log(data);
			document.getElementById("rate").textContent = data.rate;
			document.getElementById("monthlyPayment").textContent= data.monthlyPayment;
			document.getElementById("totalPayment").textContent=data.totalPayment;
          })
          .catch(function () {
            console.log("Error occured");
          });
      }
    </script>
  </body>
</html>
